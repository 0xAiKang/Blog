<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>Laravel Collection 基本使用 - Boo</title>
  
    <meta name="keywords" content="PHP,Laravel">
  
  
    <meta name="description" content="集合是Laravel 中提供的最强大的功能之一，集合本质上是由功能强大的数组组成。">
  

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="Boo">
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <div class="cover-wrapper">
    
      <cover class='cover post half'>
        <div class='cover-body'>
  <div class='a'>
    
    
      <p class="title">Boo's Blog</p>
    
    
      <p class="subtitle">Stay foolish, Stay hungry</p>
    
  </div>
  <div class='b'>
    
      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <input type="text" class="input u-search-input" placeholder="" />
          <i class="icon fas fa-search fa-fw"></i>
        </form>
      </div>
    
    <div class='menu navigation'>
      <ul class='cover-list-h'>
        
          
            <li>
              <a class="nav home"
                href="https://www.0x2BeAce.com/"
                
                
                id="https:www0x2BeAcecom">
                <i class='fas fa-book fa-fw'></i>博客
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://www.0x2BeAce.com/categories/"
                
                
                id="https:www0x2BeAcecomcategories">
                <i class='fas fa-rss fa-fw'></i>分类
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://www.0x2BeAce.com/tags/"
                
                
                id="https:www0x2BeAcecomtags">
                <i class='fas fa-play-circle fa-fw'></i>标签
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://www.0x2BeAce.com/archives/"
                
                  rel="external nofollow noopener noreferrer"
                
                
                id="https:www0x2BeAcecomarchives">
                <i class='fas fa-file-code fa-fw'></i>归档
              </a>
            </li>
          
            <li>
              <a class="nav home"
                href="https://www.0x2BeAce.com/about/"
                
                
                id="https:www0x2BeAcecomabout">
                <i class='fas fa-handshake fa-fw'></i>关于我
              </a>
            </li>
          
        
      </ul>
    </div>
  </div>
</div>

      </cover>
    
    <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h'>
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
            Boo's Blog
          
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/basic-use-of-collection-in-laravel/">
      Laravel Collection 基本使用
    </a>
  </h1>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://www.0x2BeAce.com" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/0xAiKang/CDN/blog/images/avatar.jpg">
    <p>Boo</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/PHP/Laravel/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>PHP/Laravel</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Apr 25, 2021</p>
  </a>
</div>

            
          
            
              

            
          
            
              
  <div class="new-meta-item wordcount">
    <a class='notlink'>
      <i class="fas fa-keyboard fa-fw" aria-hidden="true"></i>
      <p>7.8k words</p>
    </a>
  </div>
  <div class="new-meta-item readtime">
    <a class='notlink'>
      <i class="fas fa-hourglass-half fa-fw" aria-hidden="true"></i>
      <p>36 min</p>
    </a>
  </div>


            
          
            
              
  <div class="new-meta-item browse valine">
    <a class='notlink'>
      <i class="fas fa-eye fa-fw" aria-hidden="true"></i>
      
      <span id="/basic-use-of-collection-in-laravel/" class="leancloud_visitors" data-flag-title="Laravel Collection 基本使用">
      <p>
        <span class="leancloud-visitors-count"></span>
      </p>
      </span>
    </a>
  </div>


            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <p>集合是Laravel 中提供的最强大的功能之一，集合本质上是由功能强大的数组组成。</p>
<a id="more"></a>

<p>把类似数组的对象应用到方法中是很有用的，通过链式编程，用极短的代码，就可以达到预期的效果。</p>
<p>需要注意的是集合并不是Laravel 中独有的，许多语言都可以在数组中使用集合式编程，但非常遗憾，原生的PHP 是不支持集合式编程的，不过幸运的是，一些勤劳的人已经为我们完成了艰苦的工作，并编写了一个非常方便的包——<a href="https://github.com/illuminate/support" target="_blank" rel="noopener">illuminate/support</a>、<a href="https://github.com/tighten/collect" target="_blank" rel="noopener">Tightenco/Collect</a> 。</p>
<p>一般来说，集合是不可改变的，这意味着大部分 Collection 方法都会返回一个全新的 Collection 实例。</p>
<h2 id="创建集合"><a href="#创建集合" class="headerlink" title="创建集合"></a>创建集合</h2><p>为了创建一个集合，可以将一个数组传入集合的构造器中，也可以创建一个空的集合，然后把元素写到集合中。Laravel 有<code>collect()</code>助手，这是最简单的，新建集合的方法。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>默认情况下， Eloquent 查询的结果返回的内容都是 <code>Illuminate\Support\Collection</code> 实例，如果希望对结果进行序列化，可以使用<code>toArray()</code>、<code>toJson()</code> 方法。</p>
</blockquote>
<p>在非Laravel 项目中使用集合：</p>
<p>安装：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer <span class="keyword">require</span> illuminate/support</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 引入package</span></span><br><span class="line"><span class="keyword">require</span> <span class="keyword">__DIR__</span> . <span class="string">'/vendor/autoload.php'</span>;</span><br><span class="line"></span><br><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">var_dump($collection);</span><br></pre></td></tr></table></figure>

<p>记住，所有方法都可以使用链式编程的方式优雅的操纵数组。而且几乎所有的方法都会返回<strong>新的</strong> <code>Collection</code> 实例。</p>
<h2 id="方法列表"><a href="#方法列表" class="headerlink" title="方法列表"></a>方法列表</h2><h3 id="all"><a href="#all" class="headerlink" title="all"></a>all</h3><p>返回该集合表示的底层数组。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="string">"boo"</span>, <span class="string">"yumi"</span>, <span class="string">"mac"</span>])-&gt;all();</span><br><span class="line"><span class="comment">// [“boo”, "yumi", "mac"]</span></span><br></pre></td></tr></table></figure>

<h3 id="avg"><a href="#avg" class="headerlink" title="avg"></a>avg</h3><p>获取数组的平均值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>])-&gt;avg(); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>获取二维数组的平均值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([[<span class="string">'foo'</span> =&gt; <span class="number">10</span>], [<span class="string">'foo'</span> =&gt; <span class="number">10</span>], [<span class="string">'foo'</span> =&gt; <span class="number">20</span>], [<span class="string">'foo'</span> =&gt; <span class="number">40</span>]])-&gt;avg(<span class="string">'foo'</span>); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<h3 id="average"><a href="#average" class="headerlink" title="average"></a>average</h3><p><code>avg()</code>方法的别名，两者的效果是一样的。</p>
<h3 id="chunk"><a href="#chunk" class="headerlink" title="chunk"></a>chunk</h3><p>将大集合按指定大小拆分成小集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]);</span><br><span class="line">$chunks = $collection-&gt;chunk(<span class="number">4</span>);</span><br><span class="line">$chunks-&gt;toArray();</span><br><span class="line"><span class="comment">// [[1, 2, 3, 4], [5, 6, 7]]</span></span><br></pre></td></tr></table></figure>

<h3 id="chunkWhile"><a href="#chunkWhile" class="headerlink" title="chunkWhile"></a>chunkWhile</h3><p>根据指定的回调值把集合分解成多个更小的集合：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect(str_split(<span class="string">'AABBCCCD'</span>));</span><br><span class="line"></span><br><span class="line">$chunks = $collection-&gt;chunkWhile(<span class="function"><span class="keyword">function</span> <span class="params">($current, $key, $chunk)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $current === $chunk-&gt;last();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$chunks-&gt;all();</span><br><span class="line"><span class="comment">// [['A', 'A'], ['B', 'B'], ['C', 'C', 'C'], ['D']]</span></span><br></pre></td></tr></table></figure>

<h3 id="collapse"><a href="#collapse" class="headerlink" title="collapse"></a>collapse</h3><p>将多个数组合并成一个集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]);</span><br><span class="line"><span class="comment">// 注意这里返回了一个新的集合</span></span><br><span class="line">$collapsed = $collection-&gt;collapse();</span><br><span class="line">$collapsed-&gt;all();</span><br><span class="line"><span class="comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure>

<h3 id="combine"><a href="#combine" class="headerlink" title="combine"></a>combine</h3><p>将一个集合的值作为「键」，再将另一个数组或者集合的值作为「值」合并成一个集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span>, <span class="string">'age'</span>]);</span><br><span class="line">$combined = $collection-&gt;combine([<span class="string">'boo'</span>, <span class="number">25</span>]);</span><br><span class="line">$combined-&gt;all();</span><br><span class="line"><span class="comment">// ['name' =&gt; 'boo', 'age' =&gt; 25]</span></span><br></pre></td></tr></table></figure>

<h3 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h3><p>返回一个包含当前集合所含元素的新的 Collection 实例：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">$collection-&gt;all(); </span><br><span class="line"><span class="comment">// [1,2,3]</span></span><br></pre></td></tr></table></figure>

<h3 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h3><p>追加给定数组或集合数据到集合末尾。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'John Doe'</span>]);</span><br><span class="line">$concatenated = $collection-&gt;concat([<span class="string">'Boo'</span>])-&gt;concat([<span class="string">'name'</span> =&gt; <span class="string">'Yumi'</span>]);</span><br><span class="line">$concatenated-&gt;all();</span><br><span class="line"><span class="comment">// ['John Doe', 'Boo', 'Yumi']</span></span><br></pre></td></tr></table></figure>

<h3 id="contains"><a href="#contains" class="headerlink" title="contains"></a>contains</h3><p>判断集合是否包含给定的项目。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'boo'</span>, <span class="string">'age'</span> =&gt; <span class="number">25</span>]);</span><br><span class="line">$collection-&gt;contains(<span class="string">'boo'</span>);  <span class="comment">// true</span></span><br><span class="line">$collection-&gt;contains(<span class="string">'yumi'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>也可以用 contains 方法匹配一对键/值，即判断给定的配对是否存在于集合中：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'boo'</span>, <span class="string">'age'</span> =&gt; <span class="number">25</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'yumi'</span>, <span class="string">'age'</span> =&gt; <span class="number">23</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;contains(<span class="string">"name"</span>, <span class="string">"mac"</span>);  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>也可以传递一个回调到 contains 方法来执行自己的真实测试：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// $value: 1 $key: 0</span></span><br><span class="line">$collection-&gt;contains(<span class="function"><span class="keyword">function</span> <span class="params">($value, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $value &gt; <span class="number">5</span>;</span><br><span class="line">&#125;); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>contains 方法在检查项目值时使用「宽松」比较，意味着具有整数值的字符串将被视为等于相同值的整数。 相反 containsStrict 方法则是使用「严格」比较进行过滤。</p>
<h3 id="containsStrict"><a href="#containsStrict" class="headerlink" title="containsStrict"></a>containsStrict</h3><p>使用「严格模式」判断集合是否包含给定的项目：</p>
<p>基本使用：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'boo'</span>, <span class="string">'age'</span> =&gt; <span class="number">25</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'yumi'</span>, <span class="string">'age'</span> =&gt; <span class="number">23</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;containsStrict(<span class="string">"age"</span>, <span class="string">"25"</span>);  <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
<p>如上例所示，数组值存在，但是值类型不一致也返回false。</p>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><p>返回该集合内的项目总数。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;count();  <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<h3 id="countBy"><a href="#countBy" class="headerlink" title="countBy"></a>countBy</h3><p>统计集合中每个元素出现的次数。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">5</span>]);</span><br><span class="line">$counted = $collection-&gt;countBy();</span><br><span class="line">$counted-&gt;all();</span><br><span class="line"><span class="comment">// [1 =&gt; 1, 2 =&gt; 3, 3 =&gt; 1, 5=&gt;2]</span></span><br></pre></td></tr></table></figure>

<p>进阶用法，自定义规则，统计元素出现的次数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection &#x3D; collect([&#39;alice@gmail.com&#39;, &#39;bob@yahoo.com&#39;, &#39;carlos@gmail.com&#39;]);</span><br><span class="line">$counted &#x3D; $collection-&gt;countBy(function ($email) &#123;</span><br><span class="line">    return substr(strrchr($email, &quot;@&quot;), 1);</span><br><span class="line">&#125;);</span><br><span class="line">$counted-&gt;all();</span><br><span class="line">&#x2F;&#x2F; [&#39;gmail.com&#39; &#x3D;&gt; 2, &#39;yahoo.com&#39; &#x3D;&gt; 1]</span><br></pre></td></tr></table></figure>

<h3 id="crossJoin"><a href="#crossJoin" class="headerlink" title="crossJoin"></a>crossJoin</h3><p>返回指定集合的可能的笛卡尔积。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">$matrix = $collection-&gt;crossJoin([<span class="string">'a'</span>, <span class="string">'b'</span>]);</span><br><span class="line"></span><br><span class="line">$matrix-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        [1, 'a'],</span></span><br><span class="line"><span class="comment">        [1, 'b'],</span></span><br><span class="line"><span class="comment">        [2, 'a'],</span></span><br><span class="line"><span class="comment">        [2, 'b'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">$matrix = $collection-&gt;crossJoin([<span class="string">'a'</span>, <span class="string">'b'</span>], [<span class="string">'I'</span>, <span class="string">'II'</span>]);</span><br><span class="line"></span><br><span class="line">$matrix-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        [1, 'a', 'I'],</span></span><br><span class="line"><span class="comment">        [1, 'a', 'II'],</span></span><br><span class="line"><span class="comment">        [1, 'b', 'I'],</span></span><br><span class="line"><span class="comment">        [1, 'b', 'II'],</span></span><br><span class="line"><span class="comment">        [2, 'a', 'I'],</span></span><br><span class="line"><span class="comment">        [2, 'a', 'II'],</span></span><br><span class="line"><span class="comment">        [2, 'b', 'I'],</span></span><br><span class="line"><span class="comment">        [2, 'b', 'II'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="dd"><a href="#dd" class="headerlink" title="dd"></a>dd</h3><p>备份文件系统和停止系统（dump and die）的缩写，打印集合元素并中断脚本执行。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'John Doe'</span>, <span class="string">'Jane Doe'</span>]);</span><br><span class="line">$collection-&gt;dd();</span><br></pre></td></tr></table></figure>
<p>如果不想中断执行脚本，请使用<code>dump</code>方法替代。</p>
<h3 id="dump"><a href="#dump" class="headerlink" title="dump"></a>dump</h3><p>打印集合项而不终止脚本执行。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'John Doe'</span>, <span class="string">'Jane Doe'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;dump();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Collection &#123;</span></span><br><span class="line"><span class="comment">        #items: array:2 [</span></span><br><span class="line"><span class="comment">            0 =&gt; "John Doe"</span></span><br><span class="line"><span class="comment">            1 =&gt; "Jane Doe"</span></span><br><span class="line"><span class="comment">        ]</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h3><p>与给定的集合或者数组进行比较，基于值求差集。</p>
<p>将集合与其它集合或纯 PHP 数组进行值的比较，然后返回原集合中存在而给定集合中不存在的值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">$collection-&gt;diff([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>])-&gt;all();   <span class="comment">// [1, 3, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="diffAssoc"><a href="#diffAssoc" class="headerlink" title="diffAssoc"></a>diffAssoc</h3><p>与给定的集合或者数组进行比较，基于键值对求差集。</p>
<p>返回原集合不存在于给定集合中的键值对：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="string">'color'</span> =&gt; <span class="string">'orange'</span>,</span><br><span class="line">    <span class="string">'type'</span> =&gt; <span class="string">'fruit'</span>,</span><br><span class="line">    <span class="string">'remain'</span> =&gt; <span class="number">6</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$diff = $collection-&gt;diffAssoc([</span><br><span class="line">    <span class="string">'color'</span> =&gt; <span class="string">'yellow'</span>,</span><br><span class="line">    <span class="string">'type'</span> =&gt; <span class="string">'fruit'</span>,</span><br><span class="line">    <span class="string">'remain'</span> =&gt; <span class="number">3</span>,</span><br><span class="line">    <span class="string">'used'</span> =&gt; <span class="number">6</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$diff-&gt;all(); <span class="comment">// ['color' =&gt; 'orange', 'remain' =&gt; 6]</span></span><br></pre></td></tr></table></figure>

<h3 id="diffKeys"><a href="#diffKeys" class="headerlink" title="diffKeys"></a>diffKeys</h3><p>与给定的集合或者数组进行比较，基于键求差集。</p>
<p>返回原集合中存在而给定的集合中不存在「键」所对应的键值对：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="string">'one'</span> =&gt; <span class="number">10</span>,</span><br><span class="line">    <span class="string">'two'</span> =&gt; <span class="number">20</span>,</span><br><span class="line">    <span class="string">'three'</span> =&gt; <span class="number">30</span>,</span><br><span class="line">    <span class="string">'four'</span> =&gt; <span class="number">40</span>,</span><br><span class="line">    <span class="string">'five'</span> =&gt; <span class="number">50</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$diff = $collection-&gt;diffKeys([</span><br><span class="line">    <span class="string">'two'</span> =&gt; <span class="number">2</span>,</span><br><span class="line">    <span class="string">'four'</span> =&gt; <span class="number">4</span>,</span><br><span class="line">    <span class="string">'six'</span> =&gt; <span class="number">6</span>,</span><br><span class="line">    <span class="string">'eight'</span> =&gt; <span class="number">8</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$diff-&gt;all(); <span class="comment">// ['one' =&gt; 10, 'three' =&gt; 30, 'five' =&gt; 50]</span></span><br></pre></td></tr></table></figure>

<h3 id="duplicates"><a href="#duplicates" class="headerlink" title="duplicates"></a>duplicates</h3><p>从集合中检索并返回重复的值。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>, <span class="string">'c'</span>, <span class="string">'b'</span>]);</span><br><span class="line">$collection-&gt;duplicates();</span><br><span class="line"><span class="comment">// [2 =&gt; 'a', 4 =&gt; 'b']</span></span><br></pre></td></tr></table></figure>

<p>如果集合包含数组或对象，则可以传递希望检查重复值的属性的键：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$employees = collect([</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'abigail@example.com'</span>, <span class="string">'position'</span> =&gt; <span class="string">'Developer'</span>],</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'james@example.com'</span>, <span class="string">'position'</span> =&gt; <span class="string">'Designer'</span>],</span><br><span class="line">    [<span class="string">'email'</span> =&gt; <span class="string">'victoria@example.com'</span>, <span class="string">'position'</span> =&gt; <span class="string">'Developer'</span>],</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">$employees-&gt;duplicates(<span class="string">'position'</span>);</span><br><span class="line"><span class="comment">// [2 =&gt; 'Developer']</span></span><br></pre></td></tr></table></figure>
<p><code>duplicates</code> 方法在检查项目值时使用「宽松」比较，相反<code>duplicatesStrict</code> 方法则是使用「严格」比较进行过滤。</p>
<h3 id="each"><a href="#each" class="headerlink" title="each"></a>each</h3><p>迭代集合中的内容并将其传递到回调函数中。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = $collection-&gt;each(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 如果要中断对内容的迭代，那就从回调中返回 false</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="comment">/* some condition */</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="eachSpread"><a href="#eachSpread" class="headerlink" title="eachSpread"></a>eachSpread</h3><p>同样是遍历集合，不过与each 的区别在于，对于多维数组，可以直接拿到元素。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([[<span class="string">'Boo'</span>, <span class="number">25</span>, <span class="string">"men"</span>], [<span class="string">'Yumi'</span>, <span class="number">23</span>, <span class="string">"woman"</span>]]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;eachSpread(<span class="function"><span class="keyword">function</span> <span class="params">($name, $age, $gender)</span> </span>&#123;</span><br><span class="line">    var_dump($name, $age, $gender);</span><br><span class="line">    <span class="comment">// Boo、25、men</span></span><br><span class="line">    <span class="comment">// Yumi、23、woman</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$collection-&gt;each(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span></span>&#123;</span><br><span class="line">   <span class="comment">// 同样可以在回调函数中，返回false ，终止循环</span></span><br><span class="line">   var_dump($item, $key);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    array(3) &#123;</span></span><br><span class="line"><span class="comment">      [0]=&gt;</span></span><br><span class="line"><span class="comment">      string(3) "Boo"</span></span><br><span class="line"><span class="comment">      [1]=&gt;</span></span><br><span class="line"><span class="comment">      int(25)</span></span><br><span class="line"><span class="comment">      [2]=&gt;</span></span><br><span class="line"><span class="comment">      string(3) "men"</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="every"><a href="#every" class="headerlink" title="every"></a>every</h3><p>检查集合中的每一个元素是否通过指定条件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">collect([1, 2, 3, 4])-&gt;every(function ($value, $key) &#123;</span><br><span class="line">    return $value &gt; 2;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>
<p>注意：如果集合为空， every 将返回 true。</p>
<h3 id="except"><a href="#except" class="headerlink" title="except"></a>except</h3><p>返回集合中除了指定键以外的所有项目。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'product_id'</span> =&gt; <span class="number">1</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>, <span class="string">'discount'</span> =&gt; <span class="keyword">false</span>]);</span><br><span class="line">$filtered = $collection-&gt;except([<span class="string">'price'</span>, <span class="string">'discount'</span>]);</span><br><span class="line">$filtered-&gt;all(); <span class="comment">// ['product_id' =&gt; 1]</span></span><br></pre></td></tr></table></figure>
<p>与之相反的方法是 <code>only()</code>。</p>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>使用给定的回调函数过滤集合的内容，只留下那些通过的元素。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line">$filtered = $collection-&gt;filter(<span class="function"><span class="keyword">function</span> <span class="params">($value, $key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 当闭包返回true 时，保留一个条目</span></span><br><span class="line">    <span class="keyword">return</span> $value &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$filtered-&gt;all(); <span class="comment">// [3, 4]</span></span><br></pre></td></tr></table></figure>

<p>如果没有提供回调函数，集合中所有返回false的元素都会被移除：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="keyword">null</span>, <span class="keyword">false</span>, <span class="string">''</span>, <span class="number">0</span>, []]);</span><br><span class="line">$collection-&gt;filter()-&gt;all(); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p>与之相反的方法是 <code>reject()</code>。</p>
<h3 id="first"><a href="#first" class="headerlink" title="first"></a>first</h3><p>返回集合中的第一个元素。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;first();  <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>同样可以传入回调函数，进行条件限制：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;first(<span class="function"><span class="keyword">function</span> <span class="params">($value, $key)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 当闭包返回true 时，保留一个条目</span></span><br><span class="line">    <span class="keyword">return</span> $value &gt; <span class="number">2</span>;</span><br><span class="line">&#125;); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>如果需要返回最后一个元素可以使用<code>last()</code> 方法。</p>
<h3 id="firstWhere"><a href="#firstWhere" class="headerlink" title="firstWhere"></a>firstWhere</h3><p>返回集合中含有指定键 / 值对的第一个元素：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Regena'</span>, <span class="string">'age'</span> =&gt; <span class="keyword">null</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Linda'</span>, <span class="string">'age'</span> =&gt; <span class="number">14</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Diego'</span>, <span class="string">'age'</span> =&gt; <span class="number">23</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Linda'</span>, <span class="string">'age'</span> =&gt; <span class="number">84</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回name = Linda 的第一个元素</span></span><br><span class="line">$collection-&gt;firstWhere(<span class="string">'name'</span>, <span class="string">'Linda'</span>);</span><br><span class="line"><span class="comment">// ['name' =&gt; 'Linda', 'age' =&gt; 14]</span></span><br></pre></td></tr></table></figure>

<p>还可以在firstWhere 中使用算术运算符：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;firstWhere(<span class="string">'age'</span>, <span class="string">'&gt;='</span>, <span class="number">18</span>);</span><br><span class="line"><span class="comment">// ['name' =&gt; 'Diego', 'age' =&gt; 23]</span></span><br></pre></td></tr></table></figure>

<p>和 where 方法一样，你可以将一个参数传递给 firstWhere 方法。在这种情况下， firstWhere 方法将返回指定键的值为「真」的第一个集合项：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;firstWhere(<span class="string">'age'</span>);</span><br><span class="line"><span class="comment">// ['name' =&gt; 'Linda', 'age' =&gt; 14]</span></span><br></pre></td></tr></table></figure>

<h3 id="firstMap"><a href="#firstMap" class="headerlink" title="firstMap"></a>firstMap</h3><p>遍历集合并将其中的每个值传递到给定的回调。</p>
<p>可以通过回调修改每个值的内容再返回出来，从而形成一个新的被修改过内容的集合：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Sally'</span>],</span><br><span class="line">    [<span class="string">'school'</span> =&gt; <span class="string">'Arkansas'</span>],</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">28</span>]</span><br><span class="line">]);</span><br><span class="line">$flattened = $collection-&gt;flatMap(<span class="function"><span class="keyword">function</span> <span class="params">($values)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> array_map(<span class="string">'strtoupper'</span>, $values);</span><br><span class="line">&#125;);</span><br><span class="line">$flattened-&gt;all();</span><br><span class="line"><span class="comment">// ['name' =&gt; 'SALLY', 'school' =&gt; 'ARKANSAS', 'age' =&gt; '28'];</span></span><br></pre></td></tr></table></figure>

<h3 id="flatten"><a href="#flatten" class="headerlink" title="flatten"></a>flatten</h3><p>将多维集合转为一维。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'taylor'</span>, <span class="string">'languages'</span> =&gt; [<span class="string">'php'</span>, <span class="string">'javascript'</span>]]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;flatten()-&gt;all();  <span class="comment">// ['taylor', 'php', 'javascript'];</span></span><br></pre></td></tr></table></figure>

<p>还可以选择性地传入「深度」参数：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="string">'Apple'</span> =&gt; [</span><br><span class="line">        [<span class="string">'name'</span> =&gt; <span class="string">'iPhone 6S'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Apple'</span>],</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'Samsung'</span> =&gt; [</span><br><span class="line">        [<span class="string">'name'</span> =&gt; <span class="string">'Galaxy S7'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Samsung'</span>]</span><br><span class="line">    ],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$products = $collection-&gt;flatten(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">$products-&gt;values()-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">    ['name' =&gt; 'iPhone 6S', 'brand' =&gt; 'Apple'],</span></span><br><span class="line"><span class="comment">    ['name' =&gt; 'Galaxy S7', 'brand' =&gt; 'Samsung'],</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>在这个例子里，调用 flatten 方法时不传入深度参数的话也会将嵌套数组转成一维的，然后返回 <code>[&#39;iPhone 6S&#39;, &#39;Apple&#39;, &#39;Galaxy S7&#39;, &#39;Samsung&#39;]</code>，传入深度参数能限制设置返回数组的层数。</p>
<h3 id="flip"><a href="#flip" class="headerlink" title="flip"></a>flip</h3><p>键值反转。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">"name"</span> =&gt; <span class="string">"boo"</span>, <span class="string">"age"</span> =&gt; <span class="number">25</span>]);</span><br><span class="line">$collection-&gt;flip()-&gt;all();  <span class="comment">// ["boo" =&gt; "name", 25 =&gt; "age"]</span></span><br></pre></td></tr></table></figure>

<h3 id="forget"><a href="#forget" class="headerlink" title="forget"></a>forget</h3><p>通过给定的键来移除掉集合中对应的内容。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'taylor'</span>, <span class="string">'framework'</span> =&gt; <span class="string">'laravel'</span>]);</span><br><span class="line">$collection-&gt;forget(<span class="string">'name'</span>);</span><br><span class="line">$collection-&gt;all(); </span><br><span class="line"><span class="comment">// ['framework' =&gt; 'laravel']</span></span><br></pre></td></tr></table></figure>

<p>与大多数集合的方法不同，<code>forget()</code> 不会返回修改过后的新集合；它会直接修改原来的集合。</p>
<h3 id="get"><a href="#get" class="headerlink" title="get"></a>get</h3><p>返回给定键的项目。</p>
<p>基本用法，如果该键不存在，则返回 null：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'taylor'</span>, <span class="string">'framework'</span> =&gt; <span class="string">'laravel'</span>]);</span><br><span class="line">$value = $collection-&gt;get(<span class="string">'name'</span>); <span class="comment">// taylor</span></span><br></pre></td></tr></table></figure>

<p>可以传递第二个参数作为默认值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'taylor'</span>, <span class="string">'framework'</span> =&gt; <span class="string">'laravel'</span>]);</span><br><span class="line">$value = $collection-&gt;get(<span class="string">'foo'</span>, <span class="string">'boo'</span>); <span class="comment">// boo</span></span><br></pre></td></tr></table></figure>

<p>甚至可以将回调函数当作默认值。如果指定的键不存在，就会返回回调的结果：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'name'</span> =&gt; <span class="string">'taylor'</span>, <span class="string">'framework'</span> =&gt; <span class="string">'laravel'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;get(<span class="string">'email'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'boo'</span>;</span><br><span class="line">&#125;); <span class="comment">// boo</span></span><br></pre></td></tr></table></figure>

<h3 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h3><p>根据给定的键对集合内的项目进行分组。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'account_id'</span> =&gt; <span class="string">'account-x10'</span>, <span class="string">'product'</span> =&gt; <span class="string">'Chair'</span>],</span><br><span class="line">    [<span class="string">'account_id'</span> =&gt; <span class="string">'account-x10'</span>, <span class="string">'product'</span> =&gt; <span class="string">'Bookcase'</span>],</span><br><span class="line">    [<span class="string">'account_id'</span> =&gt; <span class="string">'account-x11'</span>, <span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$grouped = $collection-&gt;groupBy(<span class="string">'account_id'</span>);</span><br><span class="line"></span><br><span class="line">$grouped-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'account-x10' =&gt; [</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x10', 'product' =&gt; 'Chair'],</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x10', 'product' =&gt; 'Bookcase'],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">        'account-x11' =&gt; [</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x11', 'product' =&gt; 'Desk'],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>同样可以传入一个回调函数来代替字符串的『键』，根据该回调函数的返回值来进行分组：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$grouped = $collection-&gt;groupBy(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> substr($item[<span class="string">'account_id'</span>], <span class="number">-3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$grouped-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'x10' =&gt; [</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x10', 'product' =&gt; 'Chair'],</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x10', 'product' =&gt; 'Bookcase'],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">        'x11' =&gt; [</span></span><br><span class="line"><span class="comment">            ['account_id' =&gt; 'account-x11', 'product' =&gt; 'Desk'],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>甚至可以传入一个数组进行多层分组：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$data = <span class="keyword">new</span> Collection([</span><br><span class="line">    <span class="number">10</span> =&gt; [<span class="string">'user'</span> =&gt; <span class="number">1</span>, <span class="string">'skill'</span> =&gt; <span class="number">1</span>, <span class="string">'roles'</span> =&gt; [<span class="string">'Role_1'</span>, <span class="string">'Role_3'</span>]],</span><br><span class="line">    <span class="number">20</span> =&gt; [<span class="string">'user'</span> =&gt; <span class="number">2</span>, <span class="string">'skill'</span> =&gt; <span class="number">1</span>, <span class="string">'roles'</span> =&gt; [<span class="string">'Role_1'</span>, <span class="string">'Role_2'</span>]],</span><br><span class="line">    <span class="number">30</span> =&gt; [<span class="string">'user'</span> =&gt; <span class="number">3</span>, <span class="string">'skill'</span> =&gt; <span class="number">2</span>, <span class="string">'roles'</span> =&gt; [<span class="string">'Role_1'</span>]],</span><br><span class="line">    <span class="number">40</span> =&gt; [<span class="string">'user'</span> =&gt; <span class="number">4</span>, <span class="string">'skill'</span> =&gt; <span class="number">2</span>, <span class="string">'roles'</span> =&gt; [<span class="string">'Role_2'</span>]],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$result = $data-&gt;groupBy([</span><br><span class="line">    <span class="string">'skill'</span>,</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="params">($item)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $item[<span class="string">'roles'</span>];</span><br><span class="line">    &#125;,</span><br><span class="line">], $preserveKeys = <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">    1 =&gt; [</span></span><br><span class="line"><span class="comment">        'Role_1' =&gt; [</span></span><br><span class="line"><span class="comment">            10 =&gt; ['user' =&gt; 1, 'skill' =&gt; 1, 'roles' =&gt; ['Role_1', 'Role_3']],</span></span><br><span class="line"><span class="comment">            20 =&gt; ['user' =&gt; 2, 'skill' =&gt; 1, 'roles' =&gt; ['Role_1', 'Role_2']],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">        'Role_2' =&gt; [</span></span><br><span class="line"><span class="comment">            20 =&gt; ['user' =&gt; 2, 'skill' =&gt; 1, 'roles' =&gt; ['Role_1', 'Role_2']],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">        'Role_3' =&gt; [</span></span><br><span class="line"><span class="comment">            10 =&gt; ['user' =&gt; 1, 'skill' =&gt; 1, 'roles' =&gt; ['Role_1', 'Role_3']],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    ],</span></span><br><span class="line"><span class="comment">    2 =&gt; [</span></span><br><span class="line"><span class="comment">        'Role_1' =&gt; [</span></span><br><span class="line"><span class="comment">            30 =&gt; ['user' =&gt; 3, 'skill' =&gt; 2, 'roles' =&gt; ['Role_1']],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">        'Role_2' =&gt; [</span></span><br><span class="line"><span class="comment">            40 =&gt; ['user' =&gt; 4, 'skill' =&gt; 2, 'roles' =&gt; ['Role_2']],</span></span><br><span class="line"><span class="comment">        ],</span></span><br><span class="line"><span class="comment">    ],</span></span><br><span class="line"><span class="comment">];</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="has"><a href="#has" class="headerlink" title="has"></a>has</h3><p>判断集合中是否存在给定的键。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">"name"</span> =&gt; <span class="string">"boo"</span>, <span class="string">"age"</span> =&gt; <span class="number">25</span>]);</span><br><span class="line">$collection-&gt;has(<span class="string">"name"</span>);  <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="implode"><a href="#implode" class="headerlink" title="implode"></a>implode</h3><p>合并集合中的项目。</p>
<p>implode 方法用于合并集合项。其参数取决于集合项的类型。如果集合包含数组或对象，你应该传递你希望合并的属性的键，以及你希望放在值之间用来「拼接」的字符串：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'account_id'</span> =&gt; <span class="number">1</span>, <span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>],</span><br><span class="line">    [<span class="string">'account_id'</span> =&gt; <span class="number">2</span>, <span class="string">'product'</span> =&gt; <span class="string">'Chair'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;implode(<span class="string">'product'</span>, <span class="string">', '</span>);</span><br><span class="line"><span class="comment">// Desk, Chair</span></span><br></pre></td></tr></table></figure>

<p>如果集合中包含简单的字符串或数值，只需要传入「拼接」用的字符串作为该方法的唯一参数即可：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;implode(<span class="string">'-'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// '1-2-3-4-5'</span></span><br></pre></td></tr></table></figure>

<h3 id="intersect"><a href="#intersect" class="headerlink" title="intersect"></a>intersect</h3><p>从原集合中移除不在给定数组或集合中的『任何值』，返回新的集合将保留原集合的键。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'Desk'</span>, <span class="string">'Sofa'</span>, <span class="string">'Chair'</span>]);</span><br><span class="line">$intersect = $collection-&gt;intersect([<span class="string">'Desk'</span>, <span class="string">'Chair'</span>, <span class="string">'Bookcase'</span>]);</span><br><span class="line">$intersect-&gt;all();</span><br><span class="line"><span class="comment">// [0 =&gt; 'Desk', 2 =&gt; 'Chair']</span></span><br></pre></td></tr></table></figure>

<h3 id="intersectKey"><a href="#intersectKey" class="headerlink" title="intersectKey"></a>intersectKey</h3><p>删除原集合中不存在于给定数组或集合中的『任何键』，返回新的集合将保留原集合的键。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="string">'serial'</span> =&gt; <span class="string">'UX301'</span>, <span class="string">'type'</span> =&gt; <span class="string">'screen'</span>, <span class="string">'year'</span> =&gt; <span class="number">2009</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$intersect = $collection-&gt;intersectByKeys([</span><br><span class="line">    <span class="string">'reference'</span> =&gt; <span class="string">'UX404'</span>, <span class="string">'type'</span> =&gt; <span class="string">'tab'</span>, <span class="string">'year'</span> =&gt; <span class="number">2011</span>,</span><br><span class="line">]);</span><br><span class="line">$intersect-&gt;all();</span><br><span class="line"><span class="comment">// ['type' =&gt; 'screen', 'year' =&gt; 2009]</span></span><br></pre></td></tr></table></figure>

<h3 id="isEmpty"><a href="#isEmpty" class="headerlink" title="isEmpty"></a>isEmpty</h3><p>判断集合是否为空。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([])-&gt;isEmpty(); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h3 id="isNotEmpty"><a href="#isNotEmpty" class="headerlink" title="isNotEmpty"></a>isNotEmpty</h3><p>判断集合是否不为空。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([])-&gt;isEmpty(); <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><p>将集合中的值用字符串连接。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])-&gt;join(<span class="string">', '</span>); <span class="comment">// 'a, b, c'</span></span><br><span class="line">collect([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>])-&gt;join(<span class="string">', '</span>, <span class="string">', and '</span>); <span class="comment">// 'a, b, and c'</span></span><br><span class="line">collect([<span class="string">'a'</span>, <span class="string">'b'</span>])-&gt;join(<span class="string">', '</span>, <span class="string">' and '</span>); <span class="comment">// 'a and b'</span></span><br><span class="line">collect([<span class="string">'a'</span>])-&gt;join(<span class="string">', '</span>, <span class="string">' and '</span>); <span class="comment">// 'a'</span></span><br><span class="line">collect([])-&gt;join(<span class="string">', '</span>, <span class="string">' and '</span>); <span class="comment">// ''</span></span><br></pre></td></tr></table></figure>

<h3 id="keyBy"><a href="#keyBy" class="headerlink" title="keyBy"></a>keyBy</h3><p>以给定的键作为集合的键。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'product_id'</span> =&gt; <span class="string">'prod-100'</span>, <span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>],</span><br><span class="line">    [<span class="string">'product_id'</span> =&gt; <span class="string">'prod-200'</span>, <span class="string">'name'</span> =&gt; <span class="string">'Chair'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$keyed = $collection-&gt;keyBy(<span class="string">'product_id'</span>);</span><br><span class="line"></span><br><span class="line">$keyed-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'prod-100' =&gt; ['product_id' =&gt; 'prod-100', 'name' =&gt; 'Desk'],</span></span><br><span class="line"><span class="comment">        'prod-200' =&gt; ['product_id' =&gt; 'prod-200', 'name' =&gt; 'Chair'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>还可以在这个方法传递一个回调函数。该回调函数返回的值会作为该集合的键：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$keyed = $collection-&gt;keyBy(<span class="function"><span class="keyword">function</span> <span class="params">($item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> strtoupper($item[<span class="string">'product_id'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$keyed-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'PROD-100' =&gt; ['product_id' =&gt; 'prod-100', 'name' =&gt; 'Desk'],</span></span><br><span class="line"><span class="comment">        'PROD-200' =&gt; ['product_id' =&gt; 'prod-200', 'name' =&gt; 'Chair'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h3><p>返回集合的所有键。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">"name"</span> =&gt; <span class="string">"boo"</span>, <span class="string">"age"</span> =&gt; <span class="number">25</span>]);</span><br><span class="line">$collection-&gt;keys()-&gt;all();  <span class="comment">// ["name", "age"]</span></span><br></pre></td></tr></table></figure>

<h3 id="last"><a href="#last" class="headerlink" title="last"></a>last</h3><p>返回集合中通过给定真实测试的最后一个元素，与<code>first</code> 方法正好相反。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;last(<span class="function"><span class="keyword">function</span> <span class="params">($value, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $value &lt; <span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>还可以调用无参的 last 方法来获取集合的最后一个元素。如果集合为空。返回 null：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;last();</span><br><span class="line"><span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<h3 id="macro"><a href="#macro" class="headerlink" title="macro"></a>macro</h3><p>静态 <code>macro</code> 方法允许你在运行时添加方法到 <code>Collection</code> 类，更多细节可以查看扩展集合部分文档。</p>
<h3 id="make"><a href="#make" class="headerlink" title="make"></a>make</h3><p>静态 <code>make</code> 方法会创建一个新的集合实例，细节可查看创建集合部分文档。</p>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p>遍历集合并将每一个值传入给定的回调，返回新的集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$multiplied = $collection-&gt;map(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$multiplied-&gt;all();</span><br><span class="line"><span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<p>与其他大多数集合方法一样， map 会返回一个新的集合实例；它不会修改原集合。如果你想修改原集合，请使用 <code>transform</code> 方法。</p>
<h3 id="mapSpread"><a href="#mapSpread" class="headerlink" title="mapSpread"></a>mapSpread</h3><p>迭代集合项，传递每个嵌套集合项值到给定回调。在回调中我们可以修改集合项并将其返回，从而通过修改的值组合成一个新的集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]);</span><br><span class="line"></span><br><span class="line">$chunks = $collection-&gt;chunk(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">$sequence = $chunks-&gt;mapSpread(<span class="function"><span class="keyword">function</span> <span class="params">($odd, $even)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $odd + $even;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$sequence-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// [1, 5, 9, 13, 17]</span></span><br></pre></td></tr></table></figure>

<h3 id="mapToGroups"><a href="#mapToGroups" class="headerlink" title="mapToGroups"></a>mapToGroups</h3><p>通过指定回调函数对集合进行分组，</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [</span><br><span class="line">        <span class="string">'name'</span> =&gt; <span class="string">'John Doe'</span>,</span><br><span class="line">        <span class="string">'department'</span> =&gt; <span class="string">'Sales'</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">'name'</span> =&gt; <span class="string">'Jane Doe'</span>,</span><br><span class="line">        <span class="string">'department'</span> =&gt; <span class="string">'Sales'</span>,</span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">'name'</span> =&gt; <span class="string">'Johnny Doe'</span>,</span><br><span class="line">        <span class="string">'department'</span> =&gt; <span class="string">'Marketing'</span>,</span><br><span class="line">    ]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$grouped = $collection-&gt;mapToGroups(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [$item[<span class="string">'department'</span>] =&gt; $item[<span class="string">'name'</span>]];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$grouped-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'Sales' =&gt; ['John Doe', 'Jane Doe'],</span></span><br><span class="line"><span class="comment">        'Marketing' =&gt; ['Johnny Doe'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">$grouped-&gt;get(<span class="string">'Sales'</span>)-&gt;all();</span><br><span class="line"><span class="comment">// ['John Doe', 'Jane Doe']</span></span><br></pre></td></tr></table></figure>

<h3 id="mapWithKeys"><a href="#mapWithKeys" class="headerlink" title="mapWithKeys"></a>mapWithKeys</h3><p>对集合进行迭代并传递每个值到给定回调，该回调会返回包含键值对的关联数组。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [</span><br><span class="line">        <span class="string">'name'</span> =&gt; <span class="string">'John'</span>,</span><br><span class="line">        <span class="string">'department'</span> =&gt; <span class="string">'Sales'</span>,</span><br><span class="line">        <span class="string">'email'</span> =&gt; <span class="string">'john@example.com'</span></span><br><span class="line">    ],</span><br><span class="line">    [</span><br><span class="line">        <span class="string">'name'</span> =&gt; <span class="string">'Jane'</span>,</span><br><span class="line">        <span class="string">'department'</span> =&gt; <span class="string">'Marketing'</span>,</span><br><span class="line">        <span class="string">'email'</span> =&gt; <span class="string">'jane@example.com'</span></span><br><span class="line">    ]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$keyed = $collection-&gt;mapWithKeys(<span class="function"><span class="keyword">function</span> <span class="params">($item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [$item[<span class="string">'email'</span>] =&gt; $item[<span class="string">'name'</span>]];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$keyed-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">    'john<span class="doctag">@example</span>.com' =&gt; 'John',</span></span><br><span class="line"><span class="comment">    'jane<span class="doctag">@example</span>.com' =&gt; 'Jane',</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="max"><a href="#max" class="headerlink" title="max"></a>max</h3><p>返回指定键的最大值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$max = collect([[<span class="string">'foo'</span> =&gt; <span class="number">10</span>], [<span class="string">'foo'</span> =&gt; <span class="number">20</span>]])-&gt;max(<span class="string">'foo'</span>);   <span class="comment">// 20</span></span><br><span class="line">$max = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;max();   <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>

<h3 id="median"><a href="#median" class="headerlink" title="median"></a>median</h3><p>返回指定键的中间值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$median = collect([[<span class="string">'foo'</span> =&gt; <span class="number">10</span>], [<span class="string">'foo'</span> =&gt; <span class="number">10</span>], [<span class="string">'foo'</span> =&gt; <span class="number">20</span>], [<span class="string">'foo'</span> =&gt; <span class="number">40</span>]])-&gt;median(<span class="string">'foo'</span>);   <span class="comment">// 15</span></span><br><span class="line">$median = collect([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>])-&gt;median();  <span class="comment">// 1.5</span></span><br></pre></td></tr></table></figure>

<h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p>将给定数组或集合合并到原集合。</p>
<p>如果给定的集合项的字符串键与原集合中的字符串键相匹配，则指定集合项的值将覆盖原集合的值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'product_id'</span> =&gt; <span class="number">1</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>]);</span><br><span class="line">$merged = $collection-&gt;merge([<span class="string">'price'</span> =&gt; <span class="number">200</span>, <span class="string">'discount'</span> =&gt; <span class="keyword">false</span>]);</span><br><span class="line">$merged-&gt;all();</span><br><span class="line"><span class="comment">// ['product_id' =&gt; 1, 'price' =&gt; 200, 'discount' =&gt; false]</span></span><br></pre></td></tr></table></figure>

<p>如果给定的集合项为数字，则这些值将会追加在集合的最后：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection &#x3D; collect([&#39;Desk&#39;, &#39;Chair&#39;]);</span><br><span class="line">$merged &#x3D; $collection-&gt;merge([&#39;Bookcase&#39;, &#39;Door&#39;]);</span><br><span class="line">$merged-&gt;all();</span><br><span class="line">&#x2F;&#x2F; [&#39;Desk&#39;, &#39;Chair&#39;, &#39;Bookcase&#39;, &#39;Door&#39;]</span><br></pre></td></tr></table></figure>

<h3 id="min"><a href="#min" class="headerlink" title="min"></a>min</h3><p>返回指定键的最小值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$min = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;min();     <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="mode"><a href="#mode" class="headerlink" title="mode"></a>mode</h3><p>返回指定键的众数值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>])-&gt;mode();    <span class="comment">// [1]</span></span><br></pre></td></tr></table></figure>

<h3 id="nth"><a href="#nth" class="headerlink" title="nth"></a>nth</h3><p>每隔n个元素取一个元素组成一个新的集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>, <span class="string">'f'</span>]);</span><br><span class="line">$collection-&gt;nth(<span class="number">4</span>);    <span class="comment">// ['a', 'e']</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第二个参数可以作为偏移位置 </span></span><br><span class="line">$collection-&gt;nth(<span class="number">4</span>, <span class="number">1</span>); <span class="comment">// ['b', 'f']</span></span><br></pre></td></tr></table></figure>

<h3 id="only"><a href="#only" class="headerlink" title="only"></a>only</h3><p>返回集合中给定键的所有项目。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'product_id'</span> =&gt; <span class="number">1</span>, <span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>, <span class="string">'discount'</span> =&gt; <span class="keyword">false</span>]);</span><br><span class="line">$filtered = $collection-&gt;only([<span class="string">'product_id'</span>, <span class="string">'name'</span>]);</span><br><span class="line">$filtered-&gt;all();     <span class="comment">// ['product_id' =&gt; 1, 'name' =&gt; 'Desk']</span></span><br></pre></td></tr></table></figure>

<h3 id="pad"><a href="#pad" class="headerlink" title="pad"></a>pad</h3><p>将给定值填充数组直到达到指定的最大长度。该方法和 PHP 函数 array_pad 类似。</p>
<p>如果你想要把数据填充到左侧，需要指定一个负值长度，如果指定长度绝对值小于等于数组长度那么将不会做任何填充。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>]);</span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;pad(<span class="number">5</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">$filtered-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ['A', 'B', 'C', 0, 0]</span></span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;pad(<span class="number">-5</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">$filtered-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// [0, 0, 'A', 'B', 'C']</span></span><br></pre></td></tr></table></figure>

<h3 id="partition"><a href="#partition" class="headerlink" title="partition"></a>partition</h3><p>配合list()方法区分回调函数满足和不满足的数据。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">list</span>($underThree, $equalOrAboveThree) = $collection-&gt;partition(<span class="function"><span class="keyword">function</span> <span class="params">($i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $i &lt; <span class="number">3</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$underThree-&gt;all();     <span class="comment">// [1, 2]</span></span><br><span class="line">$equalOrAboveThree-&gt;all();    <span class="comment">// [3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure>

<h3 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h3><p>将集合传给给定的回调并返回结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection &#x3D; collect([1, 2, 3]);</span><br><span class="line">$piped &#x3D; $collection-&gt;pipe(function ($collection) &#123;</span><br><span class="line">    return $collection-&gt;sum();</span><br><span class="line">&#125;); &#x2F;&#x2F; 6</span><br></pre></td></tr></table></figure>

<h3 id="pluck"><a href="#pluck" class="headerlink" title="pluck"></a>pluck</h3><p>获取集合中给定键对应的所有值。</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'product_id'</span> =&gt; <span class="string">'prod-100'</span>, <span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">"id"</span> =&gt; <span class="number">1</span>],</span><br><span class="line">    [<span class="string">'product_id'</span> =&gt; <span class="string">'prod-200'</span>, <span class="string">'name'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">"id"</span> =&gt; <span class="number">2</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$plucked = $collection-&gt;pluck(<span class="string">'name'</span>);</span><br><span class="line">$plucked-&gt;all();    <span class="comment">// ['Desk', 'Chair']</span></span><br></pre></td></tr></table></figure>

<p>还可以传入第二个参数作为键值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$plucked &#x3D; $collection-&gt;pluck(&#39;name&#39;, &quot;id&quot;);</span><br><span class="line">$plucked-&gt;all();    &#x2F;&#x2F; [1 &#x3D;&gt; &#39;Desk&#39;, 2 &#x3D;&gt; &#39;Chair&#39;]</span><br></pre></td></tr></table></figure>

<h3 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h3><p>移除并返回集合中的最后一个项目。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;pop();     <span class="comment">// 5</span></span><br><span class="line">$collection-&gt;all();     <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<h3 id="prepend"><a href="#prepend" class="headerlink" title="prepend"></a>prepend</h3><p>将给定的值添加到集合的开头。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;prepend(<span class="number">99</span>);</span><br><span class="line">$collection-&gt;all();     <span class="comment">// [99, 1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>如果是关联数组，也可以传入第二个参数作为键值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'one'</span> =&gt; <span class="number">1</span>, <span class="string">'two'</span> =&gt; <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;prepend(<span class="number">0</span>, <span class="string">'zero'</span>);</span><br><span class="line">$collection-&gt;all();       <span class="comment">// ['zero' =&gt; 0, 'one' =&gt; 1, 'two' =&gt; 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><p>把给定键对应的值从集合中移除并返回。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'product_id'</span> =&gt; <span class="string">'prod-100'</span>, <span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;pull(<span class="string">'name'</span>);    <span class="comment">// 'Desk'</span></span><br><span class="line">$collection-&gt;all();           <span class="comment">// ['product_id' =&gt; 'prod-100']</span></span><br></pre></td></tr></table></figure>

<h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><p>把给定值添加到集合的末尾。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;push(<span class="number">5</span>);</span><br><span class="line">$collection-&gt;all();       <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="put"><a href="#put" class="headerlink" title="put"></a>put</h3><p>在集合内设置给定的键值对。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'product_id'</span> =&gt; <span class="number">1</span>, <span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;put(<span class="string">'price'</span>, <span class="number">100</span>);</span><br><span class="line">$collection-&gt;all();       <span class="comment">// ['product_id' =&gt; 1, 'name' =&gt; 'Desk', 'price' =&gt; 100]</span></span><br></pre></td></tr></table></figure>

<h3 id="random"><a href="#random" class="headerlink" title="random"></a>random</h3><p>从集合中返回一个随机项。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line">$collection-&gt;random();      <span class="comment">// 4 - (retrieved randomly)</span></span><br></pre></td></tr></table></figure>

<p>也可以传入一个整数用来指定需要需要获取的随机项个数：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;random();    <span class="comment">// 2, 3, 5</span></span><br></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p>用于减少集合到单个值，传递每个迭代结果到子迭代。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">$total = $collection-&gt;reduce(<span class="function"><span class="keyword">function</span> <span class="params">($carry, $item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $carry + $item;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>在第一次迭代时 $carry 的值是null；不过，你可以通过传递第二个参数到 reduce 来指定其初始值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;reduce(<span class="function"><span class="keyword">function</span> <span class="params">($carry, $item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $carry + $item;</span><br><span class="line">&#125;, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h3 id="reject"><a href="#reject" class="headerlink" title="reject"></a>reject</h3><p>使用指定的回调过滤集合，该回调应该为所有它想要从结果集合中移除的数据项返回 true。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;reject(<span class="function"><span class="keyword">function</span> <span class="params">($value, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $value &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$filtered-&gt;all();     <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<h3 id="reverse"><a href="#reverse" class="headerlink" title="reverse"></a>reverse</h3><p>倒转集合中项目的顺序，并保留原始的键值：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]);</span><br><span class="line"></span><br><span class="line">$reversed = $collection-&gt;reverse();</span><br><span class="line">$reversed-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        4 =&gt; 'e',</span></span><br><span class="line"><span class="comment">        3 =&gt; 'd',</span></span><br><span class="line"><span class="comment">        2 =&gt; 'c',</span></span><br><span class="line"><span class="comment">        1 =&gt; 'b',</span></span><br><span class="line"><span class="comment">        0 =&gt; 'a',</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="search"><a href="#search" class="headerlink" title="search"></a>search</h3><p>搜索给定的值并返回它的键，如果没有找到返回 false</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;search(<span class="number">4</span>);   <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>上面的搜索使用的是「宽松」比较，要使用「严格」比较，传递 true 作为第二个参数到该方法。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;search(<span class="string">'4'</span>, <span class="keyword">true</span>);</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>此外，你还可以传递自己的回调来搜索通过真理测试的第一个数据项。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection-&gt;search(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $item &gt; <span class="number">5</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="shift"><a href="#shift" class="headerlink" title="shift"></a>shift</h3><p>移除并返回集合的第一个元素。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;shift();   <span class="comment">// 1</span></span><br><span class="line">$collection-&gt;all();     <span class="comment">// [2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="shuffle"><a href="#shuffle" class="headerlink" title="shuffle"></a>shuffle</h3><p>随机排序集合中的项目。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$shuffled = $collection-&gt;shuffle();</span><br><span class="line">$shuffled-&gt;all();       <span class="comment">// [3, 2, 5, 1, 4] - (generated randomly)</span></span><br></pre></td></tr></table></figure>

<h3 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h3><p>从给定索引开始返回集合的一个切片。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]);</span><br><span class="line"></span><br><span class="line">$slice = $collection-&gt;slice(<span class="number">4</span>);</span><br><span class="line">$slice-&gt;all();      <span class="comment">// [5, 6, 7, 8, 9, 10]</span></span><br></pre></td></tr></table></figure>
<p>与<code>skip()</code> 方法类似。</p>
<p>如果你想要限制返回切片的尺寸，将尺寸值作为第二个参数传递到该方法。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$slice = $collection-&gt;slice(<span class="number">4</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">$slice-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// [5, 6]</span></span><br></pre></td></tr></table></figure>

<p>返回的切片有新的、数字化索引的键，如果你想要保持原有的键，可以使用 values 方法对它们进行重新索引。</p>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><p>保留原数组的键，对集合进行排序。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">5</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line">$sorted = $collection-&gt;sort();</span><br><span class="line"><span class="comment">// 重置索引</span></span><br><span class="line">$sorted-&gt;values()-&gt;all();       <span class="comment">// [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>如果有更高级的排序需求，可以通过自己的算法将回调函数传递到 <code>sort()</code> 方法。</p>
<p>如果你需要对嵌套数组或对象进行排序，请参照 <code>sortBy()</code> 和 <code>sortByDesc()</code> 方法。</p>
<h3 id="sortBy"><a href="#sortBy" class="headerlink" title="sortBy"></a>sortBy</h3><p><code>sortBy</code> 方法将根据指定键对集合进行排序。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Bookcase'</span>, <span class="string">'price'</span> =&gt; <span class="number">150</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$sorted = $collection-&gt;sortBy(<span class="string">'price'</span>);</span><br><span class="line"></span><br><span class="line">$sorted-&gt;values()-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Chair', 'price' =&gt; 100],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Bookcase', 'price' =&gt; 150],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Desk', 'price' =&gt; 200],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<p>可以传递第二个参数作为<a href="https://www.php.net/manual/en/function.sort.php" target="_blank" rel="noopener">排序标志</a>，或者，你可以通过你自己的回调函数来决定如何排序集合的值。</p>
<h3 id="sortByDesc"><a href="#sortByDesc" class="headerlink" title="sortByDesc"></a>sortByDesc</h3><p>该方法与 <code>sortBy</code> 方法一样，但是会以相反的顺序来对集合进行排序：</p>
<h3 id="sortKeys"><a href="#sortKeys" class="headerlink" title="sortKeys"></a>sortKeys</h3><p><code>sortKeys</code> 使用关联数组的键来对集合进行排序：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="string">'id'</span> =&gt; <span class="number">22345</span>,</span><br><span class="line">    <span class="string">'first'</span> =&gt; <span class="string">'John'</span>,</span><br><span class="line">    <span class="string">'last'</span> =&gt; <span class="string">'Doe'</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$sorted = $collection-&gt;sortKeys();</span><br><span class="line">$sorted-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        'first' =&gt; 'John',</span></span><br><span class="line"><span class="comment">        'id' =&gt; 22345,</span></span><br><span class="line"><span class="comment">        'last' =&gt; 'Doe',</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="sortKeysDesc"><a href="#sortKeysDesc" class="headerlink" title="sortKeysDesc"></a>sortKeysDesc</h3><p>该方法与 <code>sortKeys</code> 方法一样，但是会以相反的顺序来对集合进行排序。</p>
<h3 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h3><p>从给定位置开始移除并返回数据项切片。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$chunk = $collection-&gt;splice(<span class="number">2</span>);</span><br><span class="line">$chunk-&gt;all();            <span class="comment">// [3, 4, 5]</span></span><br><span class="line">$collection-&gt;all();       <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<p>你可以传递参数来限制返回组块的大小。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$chunk = $collection-&gt;splice(<span class="number">2</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">$chunk-&gt;all();<span class="comment">// [3]</span></span><br><span class="line"></span><br><span class="line">$collection-&gt;all(); <span class="comment">// [1, 2, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>此外，你可以传递第三个包含新的数据项的参数来替代从集合中移除的数据项。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$chunk = $collection-&gt;splice(<span class="number">2</span>, <span class="number">1</span>, [<span class="number">10</span>, <span class="number">11</span>]);</span><br><span class="line"></span><br><span class="line">$chunk-&gt;all();<span class="comment">// [3]</span></span><br><span class="line"></span><br><span class="line">$collection-&gt;all();<span class="comment">// [1, 2, 10, 11, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><p>将集合按给定的值拆分。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$groups = $collection-&gt;split(<span class="number">3</span>);</span><br><span class="line">$groups-&gt;all();     <span class="comment">// [[1, 2], [3, 4], [5]]</span></span><br></pre></td></tr></table></figure>

<h3 id="sum"><a href="#sum" class="headerlink" title="sum"></a>sum</h3><p>返回集合内所有项目的总和。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;sum();    <span class="comment">// 15</span></span><br></pre></td></tr></table></figure>

<p>如果集合包含嵌套数组或对象，应该传递一个键用于判断对哪些值进行求和运算。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'JavaScript: The Good Parts'</span>, <span class="string">'pages'</span> =&gt; <span class="number">176</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'JavaScript: The Definitive Guide'</span>, <span class="string">'pages'</span> =&gt; <span class="number">1096</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;sum(<span class="string">'pages'</span>); <span class="comment">// 1272</span></span><br></pre></td></tr></table></figure>

<p>此外，你还可以传递自己的回调来判断对哪些值进行求和。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">'colors'</span> =&gt; [<span class="string">'Black'</span>]],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'colors'</span> =&gt; [<span class="string">'Black'</span>, <span class="string">'Mahogany'</span>]],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Bookcase'</span>, <span class="string">'colors'</span> =&gt; [<span class="string">'Red'</span>, <span class="string">'Beige'</span>, <span class="string">'Brown'</span>]],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;sum(<span class="function"><span class="keyword">function</span> <span class="params">($product)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> count($product[<span class="string">'colors'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h3 id="take"><a href="#take" class="headerlink" title="take"></a>take</h3><p>返回给定数量项目的新集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$chunk = $collection-&gt;take(<span class="number">3</span>);</span><br><span class="line">$chunk-&gt;all();      <span class="comment">// [0, 1, 2]</span></span><br></pre></td></tr></table></figure>

<p>你还可以传递负数的方式从集合末尾开始获取指定数目的数据项。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$chunk = $collection-&gt;take(<span class="number">-2</span>);</span><br><span class="line"></span><br><span class="line">$chunk-&gt;all();<span class="comment">// [4, 5]</span></span><br></pre></td></tr></table></figure>

<h3 id="tap"><a href="#tap" class="headerlink" title="tap"></a>tap</h3><p>传递集合到给定回调，从而允许你在指定入口进入集合并对集合项进行处理而不影响集合本身。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">collect([<span class="number">2</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">5</span>])</span><br><span class="line">    -&gt;sort()</span><br><span class="line">    -&gt;tap(<span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">        Log::debug(<span class="string">'Values after sorting'</span>, $collection-&gt;values()-&gt;toArray());</span><br><span class="line">    &#125;)</span><br><span class="line">    -&gt;shift();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<h3 id="times"><a href="#times" class="headerlink" title="times"></a>times</h3><p>静态<code>times()</code> 方法通过调用给定次数的回调函数来创建新集合：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = Collection::times(<span class="number">10</span>, <span class="function"><span class="keyword">function</span> <span class="params">($number)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $number * <span class="number">9</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$collection-&gt;all();     <span class="comment">// [9, 18, 27, 36, 45, 54, 63, 72, 81, 90]</span></span><br></pre></td></tr></table></figure>

<p>该方法在和工厂方法一起创建 Eloquent 模型时很有用。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$categories = Collection::times(<span class="number">3</span>, <span class="function"><span class="keyword">function</span> <span class="params">($number)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> factory(Category::class)-&gt;create([<span class="string">'name'</span> =&gt; <span class="string">'Category #'</span>.$number]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$categories-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['id' =&gt; 1, 'name' =&gt; 'Category #1'],</span></span><br><span class="line"><span class="comment">        ['id' =&gt; 2, 'name' =&gt; 'Category #2'],</span></span><br><span class="line"><span class="comment">        ['id' =&gt; 3, 'name' =&gt; 'Category #3'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h3><p>迭代集合并对集合内的每个项目调用给定的回调。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]);</span><br><span class="line"></span><br><span class="line">$multiplied = $collection-&gt;map(<span class="function"><span class="keyword">function</span> <span class="params">($item, $key)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $item * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line">$multiplied-&gt;all();     <span class="comment">// [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<p>注意：each 只是遍历集合，map 则会返回一个新的集合实例；它不会修改原集合。如果你想修改原集合，请使用 transform 方法。</p>
<h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><p>将给定的数组添加到集合中。如果给定的数组含有与原集合一样的键，则首选原始集合的值。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span> =&gt; [<span class="string">'a'</span>], <span class="number">2</span> =&gt; [<span class="string">'b'</span>]]);</span><br><span class="line"></span><br><span class="line">$union = $collection-&gt;union([<span class="number">3</span> =&gt; [<span class="string">'c'</span>], <span class="number">1</span> =&gt; [<span class="string">'b'</span>]]);</span><br><span class="line">$union-&gt;all();      <span class="comment">// [1 =&gt; ['a'], 2 =&gt; ['b'], 3 =&gt; ['c']]</span></span><br></pre></td></tr></table></figure>

<h3 id="unique"><a href="#unique" class="headerlink" title="unique"></a>unique</h3><p>返回集合中所有的唯一数据项， 返回的集合保持原来的数组键，在本例中我们使用 values 方法重置这些键为连续的数字索引</p>
<p>基本用法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line">$unique = $collection-&gt;unique();</span><br><span class="line"><span class="comment">// 使用value 重置索引</span></span><br><span class="line">$unique-&gt;values()-&gt;all();     <span class="comment">// [1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<p>当处理嵌套数组或对象时，你可以指定用于确定唯一性的键：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'iPhone 6'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Apple'</span>, <span class="string">'type'</span> =&gt; <span class="string">'phone'</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'iPhone 5'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Apple'</span>, <span class="string">'type'</span> =&gt; <span class="string">'phone'</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Apple Watch'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Apple'</span>, <span class="string">'type'</span> =&gt; <span class="string">'watch'</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Galaxy S6'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Samsung'</span>, <span class="string">'type'</span> =&gt; <span class="string">'phone'</span>],</span><br><span class="line">    [<span class="string">'name'</span> =&gt; <span class="string">'Galaxy Gear'</span>, <span class="string">'brand'</span> =&gt; <span class="string">'Samsung'</span>, <span class="string">'type'</span> =&gt; <span class="string">'watch'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$unique = $collection-&gt;unique(<span class="string">'brand'</span>);</span><br><span class="line">$unique-&gt;values()-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'iPhone 6', 'brand' =&gt; 'Apple', 'type' =&gt; 'phone'],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Galaxy S6', 'brand' =&gt; 'Samsung', 'type' =&gt; 'phone'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>你还可以指定自己的回调用于判断数据项唯一性。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$unique = $collection-&gt;unique(<span class="function"><span class="keyword">function</span> <span class="params">($item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $item[<span class="string">'brand'</span>].$item[<span class="string">'type'</span>];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$unique-&gt;values()-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'iPhone 6', 'brand' =&gt; 'Apple', 'type' =&gt; 'phone'],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Apple Watch', 'brand' =&gt; 'Apple', 'type' =&gt; 'watch'],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Galaxy S6', 'brand' =&gt; 'Samsung', 'type' =&gt; 'phone'],</span></span><br><span class="line"><span class="comment">        ['name' =&gt; 'Galaxy Gear', 'brand' =&gt; 'Samsung', 'type' =&gt; 'watch'],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="uniqueStrict"><a href="#uniqueStrict" class="headerlink" title="uniqueStrict"></a>uniqueStrict</h3><p>该方法和 <code>unique</code> 方法签名一样，不同之处在于所有值都是「严格」比较。</p>
<h3 id="unless"><a href="#unless" class="headerlink" title="unless"></a>unless</h3><p>会执行给定回调，除非传递到该方法的第一个参数等于 true。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;unless(<span class="keyword">true</span>, <span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $collection-&gt;push(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$collection-&gt;unless(<span class="keyword">false</span>, <span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $collection-&gt;push(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">$collection-&gt;all();</span><br><span class="line"><span class="comment">// [1, 2, 3, 5]</span></span><br></pre></td></tr></table></figure>

<p>与 unless 相对的方法是 when。</p>
<h3 id="values"><a href="#values" class="headerlink" title="values"></a>values</h3><p>返回键被重置为连续编号的新集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    <span class="number">10</span> =&gt; [<span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>],</span><br><span class="line">    <span class="number">11</span> =&gt; [<span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$values = $collection-&gt;values();</span><br><span class="line"></span><br><span class="line">$values-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        0 =&gt; ['product' =&gt; 'Desk', 'price' =&gt; 200],</span></span><br><span class="line"><span class="comment">        1 =&gt; ['product' =&gt; 'Desk', 'price' =&gt; 200],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="unwrap"><a href="#unwrap" class="headerlink" title="unwrap"></a>unwrap</h3><p>静态 unwrap 方法会从给定值中返回集合项。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Collection::unwrap(collect(<span class="string">'John Doe'</span>));</span><br><span class="line"><span class="comment">// ['John Doe']</span></span><br><span class="line"></span><br><span class="line">Collection::unwrap([<span class="string">'John Doe'</span>]);</span><br><span class="line"><span class="comment">// ['John Doe']</span></span><br><span class="line"></span><br><span class="line">Collection::unwrap(<span class="string">'John Doe'</span>);</span><br><span class="line"><span class="comment">// 'John Doe'</span></span><br></pre></td></tr></table></figure>

<h3 id="when"><a href="#when" class="headerlink" title="when"></a>when</h3><p>当传入的第一个参数为 true 的时，将执行给定的回调。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;when(<span class="keyword">true</span>, <span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $collection-&gt;push(<span class="number">4</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$collection-&gt;all();     <span class="comment">// [1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当传入的第一个参数不为 true 的时候，将执行给定的回调函数</span></span><br><span class="line">$collection-&gt;unless(<span class="keyword">false</span>, <span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $collection-&gt;push(<span class="number">5</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><p>通过给定的键值过滤集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Bookcase'</span>, <span class="string">'price'</span> =&gt; <span class="number">150</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Door'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;where(<span class="string">'price'</span>, <span class="number">100</span>);</span><br><span class="line">$filtered-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Chair', 'price' =&gt; 100],</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Door', 'price' =&gt; 100],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="whereStrict"><a href="#whereStrict" class="headerlink" title="whereStrict"></a>whereStrict</h3><p><code>whereStrict</code>方法使用严格模式通过给定的键值过滤集合。</p>
<h3 id="whenEmpty"><a href="#whenEmpty" class="headerlink" title="whenEmpty"></a>whenEmpty</h3><p>当集合为空时，将执行给定的回调函数。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'michael'</span>, <span class="string">'tom'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;whenEmpty(<span class="function"><span class="keyword">function</span> <span class="params">($collection)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $collection-&gt;push(<span class="string">'adam'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">$collection-&gt;all();     <span class="comment">// ['michael', 'tom']</span></span><br></pre></td></tr></table></figure>
<p>反之<code>whenNotEmpty()</code> 方法当集合不为空时，将执行给定的回调函数。</p>
<h3 id="whereIn"><a href="#whereIn" class="headerlink" title="whereIn"></a>whereIn</h3><p>通过给定的键值数组来过滤集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Bookcase'</span>, <span class="string">'price'</span> =&gt; <span class="number">150</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Door'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;whereIn(<span class="string">'price'</span>, [<span class="number">150</span>, <span class="number">200</span>]);</span><br><span class="line">$filtered-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Desk', 'price' =&gt; 200],</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Bookcase', 'price' =&gt; 150],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>类似方法还有<code>whereNotIn</code>、<code>whereBetween</code>、<code>whereNotInStrict</code>。</p>
<h3 id="whereBetween"><a href="#whereBetween" class="headerlink" title="whereBetween"></a>whereBetween</h3><p>筛选指定范围内的集合。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Desk'</span>, <span class="string">'price'</span> =&gt; <span class="number">200</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Chair'</span>, <span class="string">'price'</span> =&gt; <span class="number">80</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Bookcase'</span>, <span class="string">'price'</span> =&gt; <span class="number">150</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Pencil'</span>, <span class="string">'price'</span> =&gt; <span class="number">30</span>],</span><br><span class="line">    [<span class="string">'product'</span> =&gt; <span class="string">'Door'</span>, <span class="string">'price'</span> =&gt; <span class="number">100</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">$filtered = $collection-&gt;whereBetween(<span class="string">'price'</span>, [<span class="number">100</span>, <span class="number">200</span>]);</span><br><span class="line">$filtered-&gt;all();</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    [</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Desk', 'price' =&gt; 200],</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Bookcase', 'price' =&gt; 150],</span></span><br><span class="line"><span class="comment">        ['product' =&gt; 'Door', 'price' =&gt; 100],</span></span><br><span class="line"><span class="comment">    ]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="wrap"><a href="#wrap" class="headerlink" title="wrap"></a>wrap</h3><p>静态 wrap 方法会将给定值封装到集合中。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$collection = Collection::wrap(<span class="string">'John Doe'</span>);</span><br><span class="line"></span><br><span class="line">$collection-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ['John Doe']</span></span><br><span class="line"></span><br><span class="line">$collection = Collection::wrap([<span class="string">'John Doe'</span>]);</span><br><span class="line"></span><br><span class="line">$collection-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ['John Doe']</span></span><br><span class="line"></span><br><span class="line">$collection = Collection::wrap(collect(<span class="string">'John Doe'</span>));</span><br><span class="line"></span><br><span class="line">$collection-&gt;all();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ['John Doe']</span></span><br></pre></td></tr></table></figure>

<h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><p>将给定数组的值与相应索引处的原集合的值合并在一起。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$collection = collect([<span class="string">'Chair'</span>, <span class="string">'Desk'</span>]);</span><br><span class="line"></span><br><span class="line">$zipped = $collection-&gt;zip([<span class="number">100</span>, <span class="number">200</span>]);</span><br><span class="line">$zipped-&gt;all();     <span class="comment">// [['Chair', 100], ['Desk', 200]]</span></span><br></pre></td></tr></table></figure>

<h2 id="高阶消息传递"><a href="#高阶消息传递" class="headerlink" title="高阶消息传递"></a>高阶消息传递</h2><p>集合还支持“高阶消息传递”，也就是在集合上执行通用的功能，支持高阶消息传递的方法包括：<code>average</code>、<code>avg</code>、<code>contains</code>、<code>each</code>、<code>every</code>、<code>filter</code>、<code>first</code>、<code>map</code>、<code>partition</code>、<code>reject</code>、<code>sortBy</code>、<code>sortByDesc</code>、<code>sum</code> 和 <code>unique</code>。</p>
<p>每个高阶消息传递都可以在集合实例上以动态属性的方式访问，例如，我们使用 each 高阶消息传递来在集合的每个对象上调用一个方法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$users = User::where(<span class="string">'votes'</span>, <span class="string">'&gt;'</span>, <span class="number">500</span>)-&gt;get();</span><br><span class="line"></span><br><span class="line">$users-&gt;each-&gt;markAsVip();</span><br></pre></td></tr></table></figure>

<p>类似的，我们可以使用 sum 高阶消息传递来聚合用户集合的投票总数：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$users = User::where(<span class="string">'group'</span>, <span class="string">'Development'</span>)-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $users-&gt;sum-&gt;votes;</span><br></pre></td></tr></table></figure>

<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://curder.gitbooks.io/laravel_study/content/collections/" target="_blank" rel="noopener">Laravel 的集合 Collection</a></li>
<li><a href="https://learnku.com/docs/laravel/8.x/collections/9390" target="_blank" rel="noopener">Laravel 集合——Laravel8.x 中文文档</a></li>
</ul>

          
            <div class='article_footer'>
              
                
  
    
    



  

  
    
    



  

  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=https://www.0x2beace.com/basic-use-of-collection-in-laravel/>https://www.0x2beace.com/basic-use-of-collection-in-laravel/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class='content article-entry'>
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          
<div class='new-meta-item author'>
  <a href="https://www.0x2BeAce.com" rel="nofollow">
    <img src="https://cdn.jsdelivr.net/gh/0xAiKang/CDN/blog/images/avatar.jpg">
    <p>Boo</p>
  </a>
</div>

        
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2022-03-25T17:03:22+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：Mar 25, 2022</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/PHP/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>PHP</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/tags/Laravel/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>Laravel</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.0x2beace.com/basic-use-of-collection-in-laravel/&title=Laravel Collection 基本使用 - Boo&summary=集合是Laravel 中提供的最强大的功能之一，集合本质上是由功能强大的数组组成。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.0x2beace.com/basic-use-of-collection-in-laravel/&title=Laravel Collection 基本使用 - Boo&summary=集合是Laravel 中提供的最强大的功能之一，集合本质上是由功能强大的数组组成。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=https://www.0x2beace.com/basic-use-of-collection-in-laravel/&title=Laravel Collection 基本使用 - Boo&summary=集合是Laravel 中提供的最强大的功能之一，集合本质上是由功能强大的数组组成。"
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
      
        
        <div class='hoverbox'>
          <a><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/wechat.png"></a>
          <div class='target'>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATgAAAE4CAAAAADqFLC2AAADnElEQVR42u3aMZLjMAwEQP//03v5JSQGkA27mplVsiy2NpjF6PVnReuFABw4cOAscOCWwL3CdfyBw/nV66Xf+/+87n7BgQMHDhw4cOC2wVVvvHq8+r3Txk/XPx1P9wsOHDhw4MCBA7cV7hgAw43cXr8afKsPrL1fcODAgQMHDhy4H4Obgr4NxOnAFRw4cODAgQMHDlxtEJkC3g4qq1DgwIEDBw4cOHC/Bpe+qJfCVgeS6YNa1+SDAwcOHDhw4MANwaUDwm/9HO8XHDhw4MCBAwduCVx3VQeNUw/oUwscOHDgwIEDB24LXLcYrha71cHk7e/cQqf7AwcOHDhw4MCB2w53W+ymBfQt7O3xtOiOC3Jw4MCBAwcOHLhlcCfAtPCtBuUuzPSDuW7ywYEDBw4cOHDg3gyXBuHp4JwORqchj9cDBw4cOHDgwIFbAjdVSKfX6274XQscOHDgwIEDB24bXDdApgPNKvRUEZ6eDw4cOHDgwIEDtxVuajDYHXR2IdOA/VghDQ4cOHDgwIED9zDc1I12B5XV36kW6GnABgcOHDhw4MCB2wZXDoCXG5564bBbmKcP9PrFQnDgwIEDBw4cuA/BVQNkClTdcDpQnRrQtv9zAAcOHDhw4MCBexNcF6ZaTFc3WB44Dj2ouMkHBw4cOHDgwIF7E1w30KYF91SwTgN8OXiDAwcOHDhw4MB9GdxTRfXUwLG6qgNMcODAgQMHDhy4bXBPF8/TRXUacNPiGhw4cODAgQMHbivc7QaqgbE74EwD6u0fRPyAwIEDBw4cOHDglsBVA+lfuFKYqePdBwYOHDhw4MCBA7cVLgWsfu4W0Wmgrt4/OHDgwIEDBw7ct8BVN1ItqLtg3eK8exwcOHDgwIEDB2473G0Ani6iU5ipArodgMGBAwcOHDhw4JbBpQFzuqC+Lca7wfp43+DAgQMHDhw4cMvhusVvdyPd700vcODAgQMHDhy4bXDdNf3iYRp0p4v0YwAGBw4cOHDgwIH7MFw3EKaQT0E/fj1w4MCBAwcOHLhlcGmRfBtEp4vuqWBbHpyCAwcOHDhw4MAthZsKlNXrrCmcT5DgwIEDBw4cOHA/DpduPA3it8G2/RkcOHDgwIEDB+5H4W6vk764OD1YLQd3cODAgQMHDhy4pXBp8OzecBdwKqC/rckHBw4cOHDgwIEbgpsqcNPgm55XBe3ePzhw4MCBAwcO3BY4qzhYRQAOHDhwFjhwn13/AKzcgJfxU23eAAAAAElFTkSuQmCC">
          </div>
        </div>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class='prev' href='/tips-of-php/'>
                <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>Tips of PHP</p>
                <p class='content'>Awesome tips for PHP.


减少if…else 的使用if...else 通常是一个糟糕的选择，它导致设计复杂，代码可读性差，并且可能导致重构困难。
123456789101...</p>
              </a>
            
            
              <a class='next' href='/how-to-use-repository-mode/'>
                <p class='title'>『转载』如何使用Repository 模式<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>若将数据库逻辑都写在 Model 里，会造成 model 代码的臃肿难以维护，基于 SOLID 原则，我们应该使用 Repository 模式辅助 Model，将相关的数据库逻辑封装在不同的 R...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class='fas fa-comments'></i> 评论</p>
      
      
      
      
      
      
        <section id="comments">
          <div id="valine_container" class="valine_thread">
            <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
          </div>
        </section>
      
      
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: 'Laravel Collection 基本使用',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
  

  
    
    



  <section class="widget toc-wrapper shadow desktop mobile" id="toc-div" >
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#创建集合"><span class="toc-text">创建集合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#方法列表"><span class="toc-text">方法列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#all"><span class="toc-text">all</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#avg"><span class="toc-text">avg</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#average"><span class="toc-text">average</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chunk"><span class="toc-text">chunk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#chunkWhile"><span class="toc-text">chunkWhile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collapse"><span class="toc-text">collapse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#combine"><span class="toc-text">combine</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#collect"><span class="toc-text">collect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#concat"><span class="toc-text">concat</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#contains"><span class="toc-text">contains</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#containsStrict"><span class="toc-text">containsStrict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#count"><span class="toc-text">count</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#countBy"><span class="toc-text">countBy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#crossJoin"><span class="toc-text">crossJoin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dd"><span class="toc-text">dd</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dump"><span class="toc-text">dump</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diff"><span class="toc-text">diff</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diffAssoc"><span class="toc-text">diffAssoc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#diffKeys"><span class="toc-text">diffKeys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#duplicates"><span class="toc-text">duplicates</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#each"><span class="toc-text">each</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eachSpread"><span class="toc-text">eachSpread</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#every"><span class="toc-text">every</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#except"><span class="toc-text">except</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-text">filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#first"><span class="toc-text">first</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#firstWhere"><span class="toc-text">firstWhere</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#firstMap"><span class="toc-text">firstMap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flatten"><span class="toc-text">flatten</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#flip"><span class="toc-text">flip</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#forget"><span class="toc-text">forget</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#get"><span class="toc-text">get</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#groupBy"><span class="toc-text">groupBy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#has"><span class="toc-text">has</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#implode"><span class="toc-text">implode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#intersect"><span class="toc-text">intersect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#intersectKey"><span class="toc-text">intersectKey</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isEmpty"><span class="toc-text">isEmpty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#isNotEmpty"><span class="toc-text">isNotEmpty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#join"><span class="toc-text">join</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keyBy"><span class="toc-text">keyBy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#keys"><span class="toc-text">keys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#last"><span class="toc-text">last</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#macro"><span class="toc-text">macro</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#make"><span class="toc-text">make</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#map"><span class="toc-text">map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapSpread"><span class="toc-text">mapSpread</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapToGroups"><span class="toc-text">mapToGroups</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mapWithKeys"><span class="toc-text">mapWithKeys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#max"><span class="toc-text">max</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#median"><span class="toc-text">median</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#merge"><span class="toc-text">merge</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#min"><span class="toc-text">min</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mode"><span class="toc-text">mode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nth"><span class="toc-text">nth</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#only"><span class="toc-text">only</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pad"><span class="toc-text">pad</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#partition"><span class="toc-text">partition</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pipe"><span class="toc-text">pipe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pluck"><span class="toc-text">pluck</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pop"><span class="toc-text">pop</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#prepend"><span class="toc-text">prepend</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pull"><span class="toc-text">pull</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#push"><span class="toc-text">push</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#put"><span class="toc-text">put</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#random"><span class="toc-text">random</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reduce"><span class="toc-text">reduce</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reject"><span class="toc-text">reject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reverse"><span class="toc-text">reverse</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#search"><span class="toc-text">search</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shift"><span class="toc-text">shift</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shuffle"><span class="toc-text">shuffle</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slice"><span class="toc-text">slice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort"><span class="toc-text">sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortBy"><span class="toc-text">sortBy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortByDesc"><span class="toc-text">sortByDesc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortKeys"><span class="toc-text">sortKeys</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sortKeysDesc"><span class="toc-text">sortKeysDesc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#splice"><span class="toc-text">splice</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#split"><span class="toc-text">split</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sum"><span class="toc-text">sum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#take"><span class="toc-text">take</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tap"><span class="toc-text">tap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#times"><span class="toc-text">times</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#transform"><span class="toc-text">transform</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#union"><span class="toc-text">union</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unique"><span class="toc-text">unique</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uniqueStrict"><span class="toc-text">uniqueStrict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unless"><span class="toc-text">unless</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#values"><span class="toc-text">values</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unwrap"><span class="toc-text">unwrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#when"><span class="toc-text">when</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#where"><span class="toc-text">where</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#whereStrict"><span class="toc-text">whereStrict</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#whenEmpty"><span class="toc-text">whenEmpty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#whereIn"><span class="toc-text">whereIn</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#whereBetween"><span class="toc-text">whereBetween</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wrap"><span class="toc-text">wrap</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip"><span class="toc-text">zip</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高阶消息传递"><span class="toc-text">高阶消息传递</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-text">参考链接</span></a></li></ol>
    </div>
  </section>


  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
      
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        Use
        <a href="https://volantis.js.org/" target="_blank" class="codename">Volantis</a>
        as theme, total visits
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          times
        
      
    
      
        <div class='copyright'>
        <span class="post-count">总字数：369.2k</span>
        <p><a href="https://www.0x2BeAce.com">Copyright © 2020-2021 Boo</a></p>

        <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
        
<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?fbe826b92f6d49a0ebacf4d848bd3add";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>
<script>
  var now = new Date(); 
  function createtime() {    
      var grt= new Date("07/04/2020 14:12:00");//在此处修改你的建站时间，格式：月/日/年 时:分:秒
      now.setTime(now.getTime()+250); 
      days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
      hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
      if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
      mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
      seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
      snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
      document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
      document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒";     
  } 
setInterval("createtime()",250);
</script>

      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>





  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  









  
    
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>

  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var meta = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick','mail','link'];
  var requiredFields = 'nick,mail'.split(',').filter(function(item){
    return REQUIRED_FIELDS.indexOf(item) > -1
  });
  var valine = new Valine();
  function emoji(path, idx, ext) {
      return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  valine.init({
    el: '#valine_container',
    meta: meta,
    
    appId: "Ki6kd5TUWoQyYKSErxehnRpc-MdYXbMMI",
    appKey: "7pRBOKMw58Yo7EsUjHziIEY1",
    placeholder: "快来评论吧~",
    pageSize:'10',
    avatar:'robohash',
    lang:'zh-cn',
    visitor: 'true',
    highlight: 'true',
    mathJax: 'false',
    enableQQ: 'true',
    requiredFields: requiredFields,
    emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
    emojiMaps: emojiMaps
  })
  </script>





  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 标准 markdown 描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>





  <script>setLoadingBarProgress(100);</script>
</body>
</html>
